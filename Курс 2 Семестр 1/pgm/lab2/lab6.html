
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
   <meta name="Author" content="Oleg G. Starusev">
   <meta name="Generator" content="Far Editor">
   <meta name="Description" content="C++">
   <meta name="Owner" content="derev@insart.kharkov.ua">
   <meta name="Keywords" content="программирование, C">

<title>Основы программирования. Лабораторные работы </title>
<!--                                                                   -->
<!-- (C) Oleg G. Starusev -->
<!-- (C) НТУ "ХПИ". Каф.Информатики и интеллектуальной собственности, 2002. -->

</head>

<body background=../../iip_1.jpg>
<p>
<table cellpadding=10>
<tr><td><a href=../../index.html>Каталог</a></td><td><a href=../index.html>Индекс раздела</a></td><td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=lab5.html >Назад</a></td><td><a href=index.html>Оглавление</a></td></tr>
</table>
</p>
<hr>
<H2 align=center>Лабораторная работа ╧6<BR>Массивы объектов. Ссылки.</H2>
<H3 align=center>1. Цель работы</H3>
<P>Целью лабораторной работы является получение практических навыков при 
использовании массива объектов и ссылок в языке С++.</P>
<H3 align=center>2. Темы для предварительного изучения</H3>
<P>
<UL>
  <LI>Введение в классы 
  <LI>Перегрузка функций 
  <LI>Наследование 
  <LI>Указатели и ссылки 
</p>
<H3 align=center>3. Варианты индивидуальных заданий</H3><BR>
<P>
<table  width="95%" border="2" cellspacing="0" cellpadding="4">
	<tr>
		<!-- Row 1 Column 1 -->
		<td >
			1.
		</td>
		<!-- Row 1 Column 2 -->
		<td >
			Книга (жанр, автор, название, год издания, цена)
		</td>
	</tr>
	<tr>
		<!-- Row 2 Column 1 -->
		<td >
			2.
		</td>
		<!-- Row 2 Column 2 -->
		<td >
			Дисциплина (название, объ╦м часов, форма контроля)
		</td>
	</tr>
	<tr>
		<!-- Row 3 Column 1 -->
		<td >
			3.
		</td>
		<!-- Row 3 Column 2 -->
		<td >
			Товар (название, код товара, единица измерения, продажная стоимость единицы)
		</td>
	</tr>
	<tr>
		<!-- Row 4 Column 1 -->
		<td >
			4.
		</td>
		<!-- Row 4 Column 2 -->
		<td >
			Изделие (название изделия, код изделия, марка металла, вес изделия)
		</td>
	</tr>
	<tr>
		<!-- Row 5 Column 1 -->
		<td >
			5.
		</td>
		<!-- Row 5 Column 2 -->
		<td >
			Магазин (название, номер, площадь торговых залов, площадь складских помещений)
		</td>
	</tr>
	<tr>
		<!-- Row 6 Column 1 -->
		<td >
			6.
		</td>
		<!-- Row 6 Column 2 -->
		<td >
			Автомобиль (марка, номерной знак, год выпуска, стоимость)
		</td>
	</tr>
	<tr>
		<!-- Row 7 Column 1 -->
		<td >
			7.
		</td>
		<!-- Row 7 Column 2 -->
		<td >
			Студент (ФИО, факультет, группа, средний балл успеваемости)
		</td>
	</tr>
	<tr>
		<!-- Row 8 Column 1 -->
		<td >
			8.
		</td>
		<!-- Row 8 Column 2 -->
		<td >
			Предоставляемая услуга (наименование, единица измерения, стоимость за единицу, стоимость расходных материалов за единицу)
		</td>
	</tr>
	<tr>
		<!-- Row 9 Column 1 -->
		<td >
			9.
		</td>
		<!-- Row 9 Column 2 -->
		<td >
			Пациент (ФИО, регистрационный код, адрес, год рождения, место работы)
		</td>
	</tr>
	<tr>
		<!-- Row 10 Column 1 -->
		<td >
			10.
		</td>
		<!-- Row 10 Column 2 -->
		<td >
			Автомастерская (марка автомобиля, стоимость ремонта, количество дней в ремонте, номерной знак)
		</td>
	</tr>
	<tr>
		<!-- Row 11 Column 1 -->
		<td >
			11.
		</td>
		<!-- Row 11 Column 2 -->
		<td >
			Спортсмен(ФИО, год рождения, разряд, количество лет в спорте)
		</td>
	</tr>
	<tr>
		<!-- Row 12 Column 1 -->
		<td >
			12.
		</td>
		<!-- Row 12 Column 2 -->
		<td >
			С/х предприятие (наименование, расч╦тный сч╦т, годовой доход, число пайщиков)
		</td>
	</tr>
	<tr>
		<!-- Row 13 Column 1 -->
		<td >
			13.
		</td>
		<!-- Row 13 Column 2 -->
		<td >
			Транспорт (стоимость проезда, количество единиц в парке, рентабельность, название)
		</td>
	</tr>
	<tr>
		<!-- Row 14 Column 1 -->
		<td >
		       14.
		</td>
		<!-- Row 14 Column 2 -->
		<td >
			Страна (название, столица, площадь территории, численность населения)
		</td>
	</tr>
	<tr>
		<!-- Row 15 Column 1 -->
		<td >
			15.
		</td>
		<!-- Row 15 Column 2 -->
		<td >
			Квартира (номер квартиры, номер подъезда, общая площадь, наличие телефона, ФИО квартиросъ╦мщика)
		</td>
	</tr>
	<tr>
		<!-- Row 16 Column 1 -->
		<td >
			16.
		</td>
		<!-- Row 16 Column 2 -->
		<td >
			Аэропорт (населенный пункт, пропускная способность, вместительность)
		</td>
	</tr>
	<tr>
		<!-- Row 17 Column 1 -->
		<td >
			17.
		</td>
		<!-- Row 17 Column 2 -->
		<td >
			ЭВМ (тип процессора, частота процессора, объ╦м памяти, объ╦м ЖД)
		</td>
	</tr>
	<tr>
		<!-- Row 18 Column 1 -->
		<td >
		        18.
		</td>
		<!-- Row 18 Column 2 -->
		<td >
		Самол╦т (марка, длина, размах крыльев, высота, номер рейса)
		</td>
	</tr>
	<tr>
		<!-- Row 19 Column 1 -->
		<td >
			19.
		</td>
		<!-- Row 19 Column 2 -->
		<td >
			Планета (название, радиус, масса, в какой системе находится)
		</td>
	</tr>
	<tr>
		<!-- Row 20 Column 1 -->
		<td >
			20.
		</td>
		<!-- Row 20 Column 2 -->
		<td >
			Животное (название вида, вес, возраст, тип рациона)
		</td>
	</tr>
	<tr>
		<!-- Row 21 Column 1 -->
		<td >
			21.
		</td>
		<!-- Row 21 Column 2 -->
		<td >
			Часы (модель, марка, вариант исполнения, цена)
		</td>
	</tr>
	<tr>
		<!-- Row 22 Column 1 -->
		<td >
			22.
		</td>
		<!-- Row 22 Column 2 -->
		<td >
			Птица (название, возраст, вес, дальность пол╦та)
		</td>
	</tr>
	<tr>
		<!-- Row 23 Column 1 -->
		<td >
			23.
		</td>
		<!-- Row 23 Column 2 -->
		<td >
			Кондиционер (марка, производительность, мощность , габариты)
		</td>
	</tr>
	<tr>
		<!-- Row 24 Column 1 -->
		<td >
			24.
		</td>
		<!-- Row 24 Column 2 -->
		<td >
			Дом (номер дома, улица, количество подъездов, количество этажей, количество квартир)
		</td>
	</tr>
	<tr>
		<!-- Row 25 Column 1 -->
		<td >
			25.
		</td>
		<!-- Row 25 Column 2 -->
		<td >
			Преподаватель (ФИО, институт, факультет, кафедра, стаж, оклад)
		</td>
	</tr>
	<tr>
		<!-- Row 26 Column 1 -->
		<td >
			26.
		</td>
		<!-- Row 26 Column 2 -->
		<td >
		Поликлиника (номер, обслуживаемый район, численность врачей, наличие подстанции скорой помощи)
		</td>
	</tr>
	<tr>
		<!-- Row 27 Column 1 -->
		<td >
			27.
		</td>
		<!-- Row 27 Column 2 -->
		<td >
			Радиодетали (обозначение, тип, дата выпуска, количество на схеме устройства)
		</td>
	</tr>
	<tr>
		<!-- Row 28 Column 1 -->
		<td >
			28.
		</td>
		<!-- Row 28 Column 2 -->
		<td >
			Школа (номер, количество учащихся, уровень аккредитации, статус)
		</td>
	</tr>
	<tr>
		<!-- Row 29 Column 1 -->
		<td >
			29.
		</td>
		<!-- Row 29 Column 2 -->
		<td >
			Склад (название товара, количество, стоимость, дата поставки)
		</td>
	</tr>
	<tr>
		<!-- Row 30 Column 1 -->
		<td >
			30.
		</td>
		<!-- Row 30 Column 2 -->
		<td >
			Телефон (номер, дата установки, наличие блокиратора, фамилия абонента)			
		</td>
	</tr>
</table>
</P><BR>


<H3 align=center>4. Задание к выполнению</H3>
<UL>
	<LI>Создать класс (из индивидуального задания) с заданными полями
	<LI>Создать конструктор без параметров (для начальной инициализации)
	<LI>Создать массив из 5 объектов заданного класса
	<LI>Написать функцию для изменения значений полей (с помощью ссылок)
	<LI>Написать функцию для форматированного вывода всех классов на экран (упорядоченных по первому полю)
	</LI>
</UL>

<H3 align=center>5. Пример выполнения (вариант 30)</H3><BR>
<p>
Начн╦м написание программы с определения типов полей класса и функций-членов. Наш класс <b><i>phone</b></i> (телефон) содержит 4 поля:   <b><i>long  number</b></i> (номер телефона), <b><i> char *data</b></i> (дата установки телефона), <b><i>int   lock
</b></i> (наличие/отсутствие блокиратора), <b><i>char *name</b></i> (фамилия абонента).<br><br>

Определим для нашего класса конструктор по умолчанию, который позволит нам заполнить массив объектов с помощью соответствующего метода с передачей ему заранее заданных значений.<br><br>
 <b><i> phone() { number=0; *data=' '; lock=0; *name=' ';};</b></i><br><br>

Для выполнения условий задания нам необходимы функции, которые бы выполняли: добавление записей в таблицу, их вывод и сортировку по первому полю. Определим данные функции-члены класса в секции <b><i>private</b></i>:<br><br>

<b><i>void change(phone &a,long  &numer, char *dat, int &lok, char *nm); </b></i>- добавление записи <br>
Рабочий механизм данной функции практически полностью идентичен рассмотренной ранее функции <b><i>set</b></i>, за исключением того, что в качестве передаваемого параметра функция получает ещ╦ и экземпляр класса. Полям этого экземпляра и будут присвоены значения остальных передаваемых в функцию значений.<br><br>

<b><i>void show(); </b></i>- вывод записей в виде таблицы <br>
Эта функция выполняет предпечатную подготовку данных и собственно их печать на экране монитора. Она приводит номер телефона из вида <b><i>921034</i></b> в более привычный и понятный - <b><i>92-10-34</i></b>, для чего используется преобразование номера в строку и разбор строки с расстановкой дефисов в необходимых позициях. Также функция <b><i>show() </b></i> следит за тем, есть ли блокиратор у абонента или нет. Если есть, то выводит на экран не <b><i>1</b></i>, а <i><b>ДА</i></b>, если нет - то <i><b>НЕТ</i></b>.<br><br> 

<b><i>void sort(); </b></i>- сортировка записей по первому столбцу <br>
Данная функция производит сортировку записей по полю <b><i>number</b></i> (номер телефона).<br><br>

В программе, текст которой находится ниже, для удобства используется меню, а для наглядности выполнения операций  - массив из 7 объектов. 
</p>


<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Полный текст программы приведен ниже.
<hr>
<p align="Center"><h4 align="Center">
Лабораторная работа ╧6<br>
Массивы объектов. Ссылки. <br>
Вариант ╧30               	        	  	<br>
Пример выполнения                <br>
</h4></p>
<hr>

<PRE>
#include &lt;iostream.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
#include &lt;iomanip.h&gt;

class phone{
public:
  long  number;
  char *data;
  int   lock;
  char *name;
  phone(){number=0; *data=' '; lock=0; *name=' ';};
};
  void change(phone &a,long  &numer, char *dat, int &lok, char *nm);
  void show();
  void sort();

phone obj[7];

void change(phone &a,long  &numer, char *dat, int  &lok, char *nm)
{
  a.number = numer;
  a.lock = lok;
  a.data = new char[strlen(dat)+1];
  strcpy(a.data,dat);
  a.name = new char[strlen(nm)+1];
  strcpy(a.name,nm);
}

void sort()
{
 int i,j;
 phone temp;
  for (i=0; i&lt;7; i++)
   for (j=i+1; j&lt;7; j++)
   if (obj[i].number &gt; obj[j].number) {
    temp = obj[i];
    obj[i] = obj[j];
    obj[j] = temp;
   }
}
void show()
 {
  int i,j;
 cout &lt;&lt; "                            ТЕЛЕФОН: \n";
 cout &lt;&lt; "----------------------------------------------------------------\n";
 cout &lt;&lt; "   Номер     Дата установки     Блокиратор     Фамилия абонента \n";
 cout &lt;&lt; "----------------------------------------------------------------\n";

char s[10];
for (i=0; i&lt;7; i++) {
 ltoa(obj[i].number,s,10);
 if (strlen(s)==6){
 cout &lt;&lt;' '&lt;&lt;s[0]&lt;&lt;s[1]&lt;&lt;"-"&lt;&lt;s[2]&lt;&lt;s[3]&lt;&lt;"-"&lt;&lt;s[4]&lt;&lt;s[5];}
 else if (strlen(s)==7){
 cout &lt;&lt; s[0]&lt;&lt;s[1]&lt;&lt;s[2]&lt;&lt;"-"&lt;&lt;s[3]&lt;&lt;s[4]&lt;&lt;"-"&lt;&lt;s[5]&lt;&lt;s[6];}
 cout &lt;&lt; setw(15) &lt;&lt;  obj[i].data;
  if (obj[i].lock == 0) cout &lt;&lt; setw(15) &lt;&lt; "Нет";
  else if (obj[i].lock == 1) cout &lt;&lt; setw(15) &lt;&lt; "Да";
 cout &lt;&lt; setw(25) &lt;&lt; obj[i].name;
 cout &lt;&lt; "\n";
}
cout &lt;&lt; "----------------------------------------------------------------\n";
}

void main()
{
 int r = 0;

 for (int a=0; !a;){
  clrscr();
  cout &lt;&lt;"1. Добавить записи\n"  ;
  cout &lt;&lt;"2. Сортировать базу\n";
  cout &lt;&lt;"3. Вывести базу\n";
  cout &lt;&lt;"4. Выход\n";
  cout &lt;&lt;"&gt; ";
  int p;
  cin&gt;&gt;p;
   switch(p) {
     case 1: {
      change(obj[0],921034,"12.05.99",1,"Иванов");
      change(obj[1],1002010,"17.12.85",0,"Петров");
      change(obj[2],109231,"02.01.80",1,"Сидоров");
      change(obj[3],324439,"27.07.94",0,"Селиванов");
      change(obj[4],1251367,"20.10.01",1,"Ильин");
      change(obj[5],173167,"10.01.83",0,"Хрущ╦в");
      change(obj[6],134367,"11.06.79",0,"Козлов");
      r = 1;
     break;
    }

    case 2: {
     if (r == 0) {cout&lt;&lt;"В базе нет записей."; getch();}
     else if (r == 1) sort();
    break;
    }

    case 3: {
     if (r == 0) {cout&lt;&lt;"В базе нет записей."; getch();}
    else if (r == 1)show();
    getch();
    break;
    }

    case 4: {
    a=1;
    break;
    }

    default :{
    cout &lt;&lt; "Неверный вызов";
    getch();
    break;
    }
  }
}

}
</PRE>

<hr>
<p>
<table cellpadding=10>
<tr><td><a href=lab5.html >Назад</a></td><td><a href=index.html>Оглавление</a></td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=../../index.html>Каталог</a></td><td><a href=../index.html>Индекс раздела</a></td><td></tr>
</table>
</p>
</body>
</html>
